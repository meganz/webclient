!function(){var t,i,e;!function(n){function o(t,i){return S.call(t,i)}function s(t,i){var e,n,s,r,a,u,l,h,p,d,c,_=i&&i.split("/"),f=g.map,y=/\.js$/,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(i){for(_=_.slice(0,_.length-1),t=t.split("/"),a=t.length-1,g.pkgs&&o(g.pkgs,_[0])&&y.test(t[a])&&(t[a]=t[a].replace(y,"")),t=_.concat(t),p=0;p<t.length;p+=1)if(c=t[p],"."===c)t.splice(p,1),p-=1;else if(".."===c){if(1===p&&(".."===t[2]||".."===t[0]))break;p>0&&(t.splice(p-1,2),p-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((_||m)&&f){for(e=t.split("/"),p=e.length;p>0;p-=1){if(n=e.slice(0,p).join("/"),_)for(d=_.length;d>0;d-=1)if(s=f[_.slice(0,d).join("/")],s&&(s=s[n])){r=s,u=p;break}if(r)break;!l&&m&&m[n]&&(l=m[n],h=p)}!r&&l&&(r=l,u=h),r&&(e.splice(0,u,r),t=e.join("/"))}return t}function r(t,i){return function(){return c.apply(n,b.call(arguments,0).concat([t,i]))}}function a(t){return function(i){return s(i,t)}}function u(t){return function(i){y[t]=i}}function l(t){if(o(m,t)){var i=m[t];delete m[t],v[t]=!0,d.apply(n,i)}if(!o(y,t)&&!o(v,t))throw new Error("No "+t);return y[t]}function h(t){var i,e=t?t.indexOf("!"):-1;return e>-1&&(i=t.substring(0,e),t=t.substring(e+1,t.length)),[i,t]}function p(t){return function(){return g&&g.config&&g.config[t]||{}}}var d,c,_,f,y={},m={},g={},v={},S=Object.prototype.hasOwnProperty,b=[].slice;_=function(t,i){var e,n=h(t),o=n[0];return t=n[1],o&&(o=s(o,i),e=l(o)),o?t=e&&e.normalize?e.normalize(t,a(i)):s(t,i):(t=s(t,i),n=h(t),o=n[0],t=n[1],o&&(e=l(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:e}},f={require:function(t){return r(t)},exports:function(t){var i=y[t];return"undefined"!=typeof i?i:y[t]={}},module:function(t){return{id:t,uri:"",exports:y[t],config:p(t)}}},d=function(t,i,e,s){var a,h,p,d,c,g,S=[],b=typeof e;if(s=s||t,"undefined"===b||"function"===b){for(i=!i.length&&e.length?["require","exports","module"]:i,c=0;c<i.length;c+=1)if(d=_(i[c],s),h=d.f,"require"===h)S[c]=f.require(t);else if("exports"===h)S[c]=f.exports(t),g=!0;else if("module"===h)a=S[c]=f.module(t);else if(o(y,h)||o(m,h)||o(v,h))S[c]=l(h);else{if(!d.p)throw new Error(t+" missing "+h);d.p.load(d.n,r(s,!0),u(h),{}),S[c]=y[h]}p=e?e.apply(y[t],S):void 0,t&&(a&&a.exports!==n&&a.exports!==y[t]?y[t]=a.exports:p===n&&g||(y[t]=p))}else t&&(y[t]=e)},t=i=c=function(t,i,e,o,s){var r,a;if("string"==typeof t)return f[t]?f[t](i):l(_(t,i).f);if(!t.splice){if(g=t,g.deps&&c(g.deps,g.callback),a=g.packages,g.packages)for(g.pkgs={},r=0;r<a.length;r++)g.pkgs[a[r].name||a[r]]=!0;if(!i)return;i.splice?(t=i,i=e,e=null):t=n}return i=i||function(){},"function"==typeof e&&(e=o,o=s),o?d(n,t,i,e):setTimeout(function(){d(n,t,i,e)},4),c},c.config=function(t){return c(t)},t._defined=y,e=function(t,i,e){i.splice||(e=i,i=[]),o(y,t)||o(m,t)||(m[t]=[t,i,e])},e.amd={jQuery:!0}}(),e("bower_components/almond/almond",function(){}),e("has",{}),e("events-emitter/MixableEventsEmitter",[],function(){function t(){}function i(t,i,e){var n,o;for(n=t.length-1;n>=0;n-=1)if(o=t[n],o.fn===i&&o.context===e)return n;return-1}function e(t){var e,n=t.name,o=t.ns;this._listeners=this._listeners||{},e=this._listeners[n]=this._listeners[n]||[],-1===i(e,t.fn,t.context)&&(e.push(t),o&&(this._namespaces=this._namespaces||{},e=this._namespaces[o]=this._namespaces[o]||[],e.push(t)))}function n(t){var e,n,o=t.name,s=t.ns;n=this._listeners[o],e=i(n,t.fn,t.context),-1!==e&&(this._firing?n[e]={}:(n.splice(e,1),n.length||delete n[o])),n=this._namespaces&&this._namespaces[s],n&&(e=i(n,t.fn,t.context),-1!==e&&(n.splice(e,1),n.length||delete n[s]))}function o(){var t;if(this._namespaces={},this._firing)for(t in this._listeners)this._listeners[t].length=0;else this._listeners={}}function s(t,i){var e=t.split(".");return r=e[0]||"",a=e[1],i?(h.name=r,h.ns=a,h):void 0}var r,a,u=Object.prototype.hasOwnProperty,l=Array.prototype.slice,h={};return t.prototype.on=function(t,i,n){return s(t),e.call(this,{name:r,ns:a,fn:i,callable:i,context:n}),this},t.prototype.once=function(t,i,o){var u,l,h=this;return u=function(){i.apply(this,arguments),n.call(h,l)},s(t),l={name:r,ns:a,fn:i,callable:u,context:o},e.call(this,l),this},t.prototype.one=t.prototype.once,t.prototype.off=function(t,e,u){var l,h,p,d;if(!t)return o.call(this),this;if(s(t),this._listeners=this._listeners||{},this._namespaces=this._namespaces||{},l=r?this._listeners[r]:this._namespaces[a],!l)return this;if(e)return h=i(l,e,u),-1!==h&&n.call(this,l[h]),this;if(a)for(d=l.length-1;d>=0;d-=1)p=l[d],p.ns===a&&n.call(this,l[d]);else for(d=l.length-1;d>=0;d-=1)n.call(this,l[d]);return this},t.prototype._emit=function(t){var i,e,n,o,s;if(this._listeners=this._listeners||{},i=this._listeners[t]){for(e=l.call(arguments,1),s=this._firing,this._firing=!0,n=0;n<i.length;n+=1)o=i[n],u.call(o,"fn")?o.callable.apply(o.context||this,e):(i.splice(n,1),n-=1);0===i.length&&delete this._listeners[t],this._firing=s}return this},t.prototype._trigger=t.prototype._emit,t.getListenerIndex=i,t.parseEvent=s,t.parseEventResult=h,t}),e("audio/util/createError",[],function(){function t(t,i){var e=new Error(t);return e.code=i,e}return t}),e("jquery",["jquery"],function(){return $}),e("audio/sounds/Sound",["has","events-emitter/MixableEventsEmitter","../util/createError","jquery"],function(t,i,e,n){function o(t){var i=this;this._options=n.extend({initTimeout:2e4},t||{}),this._volume=1,this._inited=!1,this.on("loadfinish",this._onSelfLoadFinish,this),this.on("loaderror",this._onSelfLoadError,this),this.on("playwaiting",this._onSelfPlayWaiting,this),this.on("playprogress",this._onSelfPlayProgress,this),this.on("playfinish",this.stop,this),this.on("playerror",this.stop,this),this._options.initTimeout&&(this._initTimer=setTimeout(function(){i._initTimer=null,i._onSelfInitError(e("Init timedout","ETIMEDOUT"))},this._options.initTimeout))}return o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.destroy=function(){this.off(),this.stop(),this.abort(),this._destroy(),this._playState=null,this._loadState=null,this._options=null,this._initHandler=null,this._cancelInitTimeout()},o.prototype.isInitialized=function(){return this._inited},o.prototype.init=function(t,i){return this._inited?t.call(i):this._initError?t.call(this,this._initError):this._initHandler=i?t.bind(i):t,this},o.prototype.load=function(){return this._assertInit(),this._loadState||(this._loadState=1,this._emit("loadstart"),this._load()),this},o.prototype.abort=function(){return 1===this._loadState&&(this.stop(),this._loadState=0,this._abort()),this},o.prototype.play=function(){return this._assertInit(),this._playState?this.resume():(this.load(),this._emit("playwaiting"),this._play(),this._setVolume(this._volume)),this},o.prototype.stop=function(){this._playState&&(this._playState=0,this._stop())},o.prototype.pause=function(){return this._playState&&3!==this._playState&&(this._playState=3,this._pause()),this},o.prototype.resume=function(){return 3===this._playState&&(this._emit("playwaiting"),this._resume()),this},o.prototype.toggle=function(){return 3===this._playState?this.resume():this.pause()},o.prototype.getMaxSeekPosition=function(){return this._assertInit(),this._getDuration()},o.prototype.seekTo=function(t){var i,e=this.getMaxSeekPosition();return this._playState?(i=this._getDuration(),!i||0>t||t>i?this:(t>e&&(t=e),3!==this._playState&&this._emit("playwaiting"),this._seekTo(t),this)):this},o.prototype.getPosition=function(){return this._loadState||this._playState?this._getPosition()||0:0},o.prototype.getDuration=function(){return this._loadState||this._playState?this._getDuration()||0:0},o.prototype.getVolume=function(){return this._volume},o.prototype.setVolume=function(t){return this._volume=t,this._playState&&this._setVolume(t),this},o.prototype.getPlayState=function(){return this._playState},o.prototype.getLoadState=function(){return this._loadState},o.prototype._assertInit=function(){if(!this._inited)throw e("Sound is not yet inited","ENOTINITED")},o.prototype._cancelInitTimeout=function(){this._initTimer&&(clearTimeout(this._initTimer),this._initTimer=null)},o.prototype._onSelfInit=function(){this._initError||this._inited||(this._cancelInitTimeout(),this._inited=!0,this._initHandler&&(this._initHandler(),this._initHandler=null))},o.prototype._onSelfInitError=function(t){this._initError||this._inited||(this._cancelInitTimeout(),this._initError=t,this._initHandler&&(this._initHandler(t),this._initHandler=null))},o.prototype._onSelfPlayWaiting=function(){this._playState=1,this._loadState||this.once("playwaiting",function(){this._emit("playerror",e("Source failed to give data","ESRC"))},this)},o.prototype._onSelfPlayProgress=function(){this._playState=2},o.prototype._onSelfLoadFinish=function(){this._loadState=2},o.prototype._onSelfLoadError=function(){this._loadState=0,1===this._playState&&this.once("loaderror",function(){this._emit("playerror",e("Source failed to give data","ESRC"))},this)},o.prototype._destroy=function(){},o}),e("audio/sounds/Html5Sound",["./Sound","../util/createError"],function(t,i){function e(i){t.call(this),this._url=i,this._onAudioTimeUpdate=this._onAudioTimeUpdate.bind(this),this._onAudioWaiting=this._onAudioWaiting.bind(this),this._onAudioSeeked=this._onAudioSeeked.bind(this),this._onAudioEnded=this._onAudioEnded.bind(this),this._onAudioError=this._onAudioError.bind(this),this._onAudioProgress=this._onAudioProgress.bind(this),this._checkLoaded=this._checkLoaded.bind(this),this._onSelfInit()}var n;return n="undefined"==typeof Audio?!1:!!(new Audio).buffered,e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.isCompatible=function(){return n},e.canPlayType=function(t){return this.isCompatible()?(-1===t.indexOf("/")&&(t="audio/"+t),this.isCompatible()?!!(new Audio).canPlayType(t):!1):!1},e.prototype._load=function(){this._audio=this._createAudio(this._url),this._addLoadListeners(),this._audio.load()},e.prototype._abort=function(){this._removeLoadListeners(),this._audio.pause(),this._audio.removeAttribute("src")},e.prototype._destroy=function(){this._audio=null},e.prototype._play=function(){this._addPlayListeners(),this._audio.play()},e.prototype._stop=function(){this._played=!1,this._removePlayListeners(),this._audio.pause(),this._audio.readyState&&(this._audio.currentTime=0)},e.prototype._pause=function(){this._audio.pause()},e.prototype._resume=function(){this._audio.play()},e.prototype._seekTo=function(t){this._audio.readyState&&(this._audio.currentTime=t)},e.prototype._setVolume=function(t){this._audio.volume=t},e.prototype._getPosition=function(){return this._audio.currentTime},e.prototype._createAudio=function(t){var i=new Audio;return i.controls=!1,i.autoplay=!1,i.preload="none",i.autobuffer=!1,i.setAttribute("src",t),i},e.prototype._getDuration=function(){var t=this._audio.duration;return t&&1/0!==t?t:null},e.prototype._addLoadListeners=function(){this._audio.addEventListener("error",this._onAudioError),this._audio.addEventListener("progress",this._onAudioProgress),this._checkLoadedTimer=setInterval(this._checkLoaded,500)},e.prototype._removeLoadListeners=function(){this._audio.removeEventListener("error",this._onAudioError),this._audio.removeEventListener("progress",this._onAudioProgress),clearInterval(this._checkLoadedTimer),this._checkLoadedTimer=null},e.prototype._addPlayListeners=function(){this._audio.addEventListener("timeupdate",this._onAudioTimeUpdate),this._audio.addEventListener("seeked",this._onAudioSeeked),this._audio.addEventListener("ended",this._onAudioEnded)},e.prototype._removePlayListeners=function(){this._audio.removeEventListener("timeupdate",this._onAudioTimeUpdate),this._audio.removeEventListener("waiting",this._onAudioWaiting),this._audio.removeEventListener("seeked",this._onAudioSeeked),this._audio.removeEventListener("ended",this._onAudioEnded)},e.prototype._onAudioTimeUpdate=function(){var t,i;3!==this._playState&&(this._played||(this._played=!0,this._audio.addEventListener("waiting",this._onAudioWaiting),this._emit("playstart")),t=this._getDuration(),t&&(i=this._audio.currentTime,!this._reportedLoad&&this._onAudioProgress(),this._emit("playprogress",i,t)))},e.prototype._onAudioWaiting=function(){this._emit("playwaiting")},e.prototype._onAudioEnded=function(){this._emit("playfinish")},e.prototype._onAudioError=function(){this._removeLoadListeners(),this._audio.removeAttribute("src"),this._emit("loaderror",i("Unable to load sound","ELOAD"))},e.prototype._onAudioSeeked=function(){var t=this._getDuration(),i=this._audio.currentTime;this._emit("seeked",i,t)},e.prototype._checkLoaded=function(){var t=this._getDuration(),i=this._audio.buffered;i.length&&t&&(i=~~(100*i.end(0))/100,t=~~(100*t)/100,i===t&&(this._removeLoadListeners(),this._emit("loadfinish")))},e.prototype._onAudioProgress=function(t){var i,e,n=this._audio.currentTime,o=this._audio.buffered,s=-1,r=this._getDuration();if(o&&r){for(i=o.length,e=0;i>e;e+=1)if(o.start(e)<=n&&o.end(e)>=n){s=e;break}-1!==s&&(t&&(this._reportedLoad=!0),this._emit("loadprogress",o.start(e)/r,o.end(e)/r))}},e}),e("js/track",[],function(){function t(t){var i;i=setInterval(function(){"undefined"!=typeof mixpanel&&(clearInterval(i),t())},300)}function i(t,i){return window.mixpanel?(mixpanel.track(t,i),void 0):(e.push({action:t,props:i}),void 0)}var e=[];return t(function(){var t,i,n=e.length;for(t=0;n>t;t+=1)i=e[t],mixpanel.track(i.action,i.props);e=[]}),i}),e("js/ads",["audio/sounds/Html5Sound","jquery","js/track"],function(t,i,e){function n(n,o){i(document).ready(function(){function s(t){var i=c.html().length?200:0;c.fadeOut(i,function(){c.html(n[t].title),c.css("font-size",n[t].fontSize||""),c.css("top",n[t].top||""),c.fadeIn(i)})}function r(i){var e=n[i];d.removeClass("paused").addClass("playing"),h&&h.destroy(),h=new t(e.url),h.init(function(t){return t?(o&&o(t),void 0):(h.play(),void 0)}).on("playfinish",function(){i+=1,i>n.length-1?u():(s(i),r(i))}).on("playprogress",a).on("loaderror",function(t){d.removeClass("playing paused"),o&&o(t)}).on("playerror",function(t){d.removeClass("playing paused"),o&&o(t)})}function a(t){t>=5&&(e("play",{nr:p+1,title:n[p].title,nrBlocks:l()}),h.off("playprogress",a))}function u(){p=0,h.stop(),s(p),d.removeClass("paused playing")}function l(){var t=0;return m.is(":visible")&&(t+=1),g.is(":visible")&&(t+=1),t}var h,p=0,d=i(".audio-player"),c=i(".music-title"),_=i(".btn-control.prev"),f=i(".btn-control.next"),y=i(".btn-control.play-pause"),m=i(".good-times-left-block"),g=i(".good-times-right-block");_.on("click",function(){p-=1,0>p&&(p=n.length-1),s(p),r(p)}),f.on("click",function(){p+=1,p>n.length-1&&(p=0),s(p),r(p)}),y.on("click",function(){h&&h.getPlayState()?3===h.getPlayState()?(d.removeClass("paused").addClass("playing"),h.resume()):(d.addClass("paused").removeClass("playing"),h.pause()):r(p)}),m.on("click",function(){e("click",{origin:"left-block",nrBlocks:l()})}),g.on("click","a",function(){e("click",{origin:"right-block",nrBlocks:l()})}),n.length&&s(0)})}return window.baboomAds=n,n}),i(["js/ads"],function(){},null,!0)}();